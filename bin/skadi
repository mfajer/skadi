#!/usr/bin/env python

import io
import optparse
import os
import sys

pwd = os.path.dirname(__file__)
root = os.path.join(pwd, '..')
sys.path.append(root)

from skadi.demo import Demo
from skadi.io import protobuf as pb_io

option_parser = optparse.OptionParser()
(options, args) = option_parser.parse_args()

for arg in args:
  print '> parsing {0}'.format(os.path.basename(arg))

  stream = io.open(os.path.join(root, arg), 'r+b')
  demo_io = pb_io.DemoIO(stream)
  dem = Demo.build(demo_io)

  # feel free to inspect built demo here with print statements